<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Box Cadeaux</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:
    linear-gradient(rgba(0,0,0,0.5),rgba(0,0,0,0.5)),
    url("images/background.jpg") center/cover no-repeat;
  color:white;
}

.container{
  max-width:1100px;
  margin:auto;
  padding:20px;
}

h1{text-align:center}

.products{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
  gap:20px;
}

.product{
  background:white;
  color:black;
  padding:15px;
  border-radius:10px;
  text-align:center;
}

.product img{
  width:100%;
  border-radius:10px;
}

button{
  background:#25D366;
  color:white;
  border:none;
  padding:10px;
  border-radius:8px;
  cursor:pointer;
  width:100%;
  font-size:16px;
}

.form{
  background:white;
  color:black;
  padding:20px;
  border-radius:10px;
  margin-top:30px;
  display:none;
}

input,select{
  width:100%;
  padding:8px;
  margin:8px 0;
}
</style>
</head>

<body>
<div class="container">

<h1>Nos Box Cadeaux</h1>

<div class="products">
  <div class="product">
    <img src="images/box1.jpg">
    <h3>Box Cadeau 1</h3>
    <p>6500 DA</p>
    <button onclick="openForm('Box Cadeau 1',6500)">Commander</button>
  </div>

  <div class="product">
    <img src="images/box2.jpg">
    <h3>Box Cadeau 2</h3>
    <p>7500 DA</p>
    <button onclick="openForm('Box Cadeau 2',7500)">Commander</button>
  </div>
</div>

<div class="form" id="orderForm">
  <h2 id="productTitle"></h2>

  <input id="name" placeholder="Nom et Prénom" required>
  <input id="phone" placeholder="Téléphone" required>

  <select id="wilaya" required>
    <option value="">-- Choisir la wilaya --</option>
  </select>

  <input id="commune" placeholder="Commune" required>

  <input type="number" id="qty" value="1" min="1" required>

  <select id="delivery">
    <option value="400">Bureau (400 DA)</option>
    <option value="800">A domicile (800 DA)</option>
  </select>

  <p id="total"></p>

  <button onclick="sendWhatsApp()">Envoyer WhatsApp</button>
</div>

</div>

<script>
/* ====== VARIABLES ====== */
let basePrice = 0;
let product = "";

/* ====== WILAYAS 58 ====== */
const wilayas = [
"Adrar","Chlef","Laghouat","Oum El Bouaghi","Batna","Béjaïa","Biskra","Béchar",
"Blida","Bouira","Tamanrasset","Tébessa","Tlemcen","Tiaret","Tizi Ouzou","Alger",
"Djelfa","Jijel","Sétif","Saïda","Skikda","Sidi Bel Abbès","Annaba","Guelma",
"Constantine","Médéa","Mostaganem","M’Sila","Mascara","Ouargla","Oran","El Bayadh",
"Illizi","Bordj Bou Arreridj","Boumerdès","El Tarf","Tindouf","Tissemsilt",
"El Oued","Khenchela","Souk Ahras","Tipaza","Mila","Aïn Defla","Naâma",
"Aïn Témouchent","Ghardaïa","Relizane","Timimoun","Bordj Badji Mokhtar",
"Ouled Djellal","Béni Abbès","In Salah","In Guezzam","Touggourt","Djanet",
"El M'Ghair","El Meniaa"
];

const wilayaSelect = document.getElementById("wilaya");
wilayas.forEach(w=>{
  const opt=document.createElement("option");
  opt.value=w;
  opt.textContent=w;
  wilayaSelect.appendChild(opt);
});

/* ====== OPEN FORM ====== */
function openForm(p,price){
  product=p;
  basePrice=price;
  document.getElementById("productTitle").innerText=p;
  document.getElementById("orderForm").style.display="block";
  calc();
  window.scrollTo(0,document.body.scrollHeight);
}

/* ====== CALCUL ====== */
function calc(){
  const q = document.getElementById("qty").value;
  const d = document.getElementById("delivery").value;
  document.getElementById("total").innerText =
    "Total: " + ((basePrice*q)+parseInt(d)) + " DA";
}
document.getElementById("qty").onchange = calc;
document.getElementById("delivery").onchange = calc;

/* ====== SEND WHATSAPP (FIX FINAL) ====== */
function sendWhatsApp(){

  const name = document.getElementById("name").value.trim();
  const phone = document.getElementById("phone").value.trim();
  const wilaya = document.getElementById("wilaya").value;
  const commune = document.getElementById("commune").value.trim();
  const qty = document.getElementById("qty").value;

  if(!name || !phone || !wilaya || !commune || qty < 1){
    alert("عمر جميع المعلومات");
    return;
  }

  const text =
`Commande
Produit: ${product}
Nom: ${name}
Tel: ${phone}
Wilaya: ${wilaya}
Commune: ${commune}
Quantité: ${qty}
${document.getElementById("total").innerText}`;

  const url = "https://wa.me/213792822978?text=" + encodeURIComponent(text);

  window.location.href = url;
}
</script>

</body>
</html>
